<div class='metadata {{document.type}}'>
  <div ng-if='!document.metadata.details.title'>
    <button class='btn btn-line' ng-if='document._type == "doc"||document._type == "voc"' ng-click='alignTo(document._index, $event)'>
      <span class='icon icon-type-{{document.type||document._type}}'></span><span class='type {{document.type}}'></span>
    </button>
    <span ng-if='document.type!="link"' class='title' embedit='document.metadata.title' language='language'></span>

    <a ng-if='document.type=="link"' target='_blank' ng-href='{{document.metadata.url}}'><span class='title' embedit='document.metadata.title' language='language'></span></a>
    
    <div ng-if='document.metadata.abstract'  class='abstract'>
      <span embedit='document.metadata.abstract' language='language'></span>
      <span ng-if='document._type == "voc"'>
        <a ui-sref='story({postId:document.slug})'>
          <span translate='more'></span>
          <span class="icon icon-arrow-right-circle"></span>
        </a>
      </span>
    </div>
    <div>
      <div ng-if='document.metadata.type=="link" && document.metadata.thumbnail_url' class='snapshot' lazy-img='{{document.metadata.thumbnail_url}}'></div>
      
      <div ng-if='document.metadata.caption' class='caption' embedit='document.metadata.caption' language='language'></div>
      <div ng-if='!document.metadata.caption && document.metadata.description' class='caption' embedit='document.metadata.description' language='language'></div>
    </div>
    <div style='clear:both' ng-if='document.metadata.copyright' embedit='document.metadata.copyright' language='language' firstline='true'></div>
  </div>
  
  <!-- having details -->
  <div ng-if='document.metadata.details.title'>
    <button class='btn btn-line' ng-if='document._type == "doc"||document._type == "voc"' ng-click='alignTo(document._index, $event)'>
      <span class='icon icon-type-{{document.type||document._type}}'></span>
    </button>
    <span class='title' embedit='document.metadata.details.title || document.metadata.title' language='language'></span>
    <div class='caption' embedit='document.metadata.details.caption' language='language'></div>
    <div class='copyright' ng-if='document.metadata.details.copyright' embedit='document.metadata.details.copyright' language='language' firstline='true'></div>
  </div>

   
  <!-- author part -->
  <div>
    <span ng-if='document.metadata.author_name'>
      <span translate='author'></span>
      <a ng-href='{{document.metadata.author_url}}' target='_blank'>{{document.metadata.author_name}}</a>
    </span>
    <span ng-if='document.metadata.provider_name'>
      <span translate='source'></span>:
      <a ng-href='{{document.metadata.provider_url}}' target='_blank'>{{document.metadata.provider_name}}</a>
    </span>
  </div>
  
  <a ng-if='user.is_staff' target='_blank' ng-href='/admin/miller/document/{{document.document_id || document.id}}/change/'>modify (admin)</a>
  <!-- <button ng-if='document.type != "link"' ng-click='fullsize(document.slug, document._type )' >preview</button> -->
  
</div>