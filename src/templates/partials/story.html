<div ng-if='!story._isCollection' class="story item">
  <div class="col-md-4 story-card" ng-if='story.covers.length'>
    <div class="story-card-inner">
      <div  ng-repeat='document in story.covers' class='fluid-container relative'>
        <div class='image-wrapper cover' lazy-img='{{document|coverage}}'></div>
        <div class='embedded-metadata' ng-include='"templates/partials/document.metadata.embedded.html"|prefixTemplate'></div>
      </div>

  <!--    Title-->
      <h3 class="title" style="overflow: hidden;"><a ui-sref="story({postId: story.slug})"><span rewording value='story.data.title' default='{{story.title}}'></span> {{story.status != 'public'? '['+story.status+']': ''}}</a></h3>

      <div>
        <div>
          <div class='authors' ng-if="story.authors.length" style="display: inline">
            <span translate="written.by"></span> <span ng-repeat='author in story.authors' ng-include='"templates/partials/author.html"|prefixTemplate'></span>
          </div>

          <div style="display: inline">
            <span ng-if='story.data.issue'>&mdash; {{story.data.issue}}</span>
            <span class="date">{{story.date|date:"yyyy'.'MM'.'dd"}}</span>
          </div>

        <div class="pull-right" style="display: inline">
          <a ng-if='user.is_staff' target='_blank' ng-href='/admin/miller/story/{{story.id}}/change/'>modify (admin)</a>
        </div>
        </div>
      </div>


    </div>
  </div>

  <div class="col-md-4 story-card" ng-if='!story.covers.length'>
    <div style="height: 189px; width: 100%;" class="well"></div>

    <!-- TODO: To refactor -->
    <h3 class="title"><a ui-sref="story({postId: story.slug})"><span rewording value='story.data.title' default='{{story.title}}'></span> {{story.status != 'public'? '['+story.status+']': ''}}</a></h3>
  </div>
</div>

<div ng-if='story._isCollection' ng-include='"templates/partials/collection.html"|prefixTemplate'></div>