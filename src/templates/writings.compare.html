<div style='position:relative; margin-top: 50px' class="contents versioned" ng-class='{"current": version.version == story.version}'>
  <div ng-if="version.version == story.version">This is the current displayed version.</div>
  <div class='log-version' ng-repeat='tag in version.logs'>
    <span class='tag-version' >{{tag.tag}}</span>
    <span class='date'> {{tag.date|date:"yyyy'.'MM'.'dd"}}</span> &mdash;<span class='message'> <span ng-if='user.username != tag.username'><b class='username'>{{tag.username}}</b>  &mdash;</span> "{{tag.message}}"</span>
  </div>
  <div class='actions'>
    <div class='btn-line-group red transparent'>
      <button class='btn-line mini' ui-sref='writing.compare.diff({storyId: story.slug, tag: version.version})' ng-class='{active: state=="writing.compare.diff"}'><span translate='diff'></span></button>
      <button class='btn-line mini' ng-class='{active: state=="writing.compare"}' ui-sref='writing.compare({storyId: story.slug, tag: version.version})'><span translate='source' ></span></button>
      <button class='btn-line mini' ui-sref='writing.compare.preview({storyId: story.slug, tag: version.version})' ng-class='{active: state=="writing.compare.preview"}'><span translate='preview' ></span></button>
    </div>
  </div>
  <div class='ui-view'>
    <div codediff raw='version.contents'></div>
    <!-- <div class='ready' id='versioned-contents' markdownit='version.contents' watchlanguage='true' language='language'></div>
    <div rangy container='versioned-contents' highlights='story.highlights' commented='commented(error, comment)' target='story' actor='user' onCommentsSelected='commentsSelected(uids)'></div> -->
  </div>
</div>
